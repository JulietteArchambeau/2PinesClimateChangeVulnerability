#!/bin/bash

# FTP server details
FTP_HOST="ftp.ceda.ac.uk"
FTP_USER="jarchambeau"
FTP_PASS="R~WW%Lx1\]!,"

# List of remote base directory paths
REMOTE_BASE_DIRS=(
    "/badc/deposited2021/chess-scape/data/rcp26"
    "/badc/deposited2021/chess-scape/data/rcp26_bias-corrected"
    "/badc/deposited2021/chess-scape/data/rcp85"
    "/badc/deposited2021/chess-scape/data/rcp85_bias-corrected"
)

# Patterns for time slices
TIME_SLICES=("19801201-20001130" "20301201-20501130" "20601201-20801130")

# Local directory path where files will be downloaded
LOCAL_DIR="/home/juliette/Documents/Projects/2PinesClimateChangeVulnerability/2PinesClimateChangeVulnerability/data/ScotsPine/Climate"

# Create local directory if it doesn't exist
mkdir -p "$LOCAL_DIR"

# Navigate to the local directory
cd "$LOCAL_DIR" || exit

# Download files using wget for each remote base directory and time slice
for remote_base_dir in "${REMOTE_BASE_DIRS[@]}"; do
    for slice in "${TIME_SLICES[@]}"; do
        # Download files containing the pattern
        wget -r -nc --user="$FTP_USER" --password="$FTP_PASS" "ftp://$FTP_HOST$remote_base_dir" -A "*$slice*"
    done
done

exit 0
